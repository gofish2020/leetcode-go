---
typora-copy-images-to: ../39. ç»„åˆæ€»å’Œ
---

é¢˜è§£ä»“åº“ï¼šhttps://github.com/gofish2020/leetcode_forever

# é¢˜ç›®ï¼š[39. ç»„åˆæ€»å’Œ](https://leetcode.cn/problems/combination-sum/)

![](./image-20231113204030681.png)

# æ€è·¯

## å¦‚ä½•ç†è§£é€’å½’è°ƒç”¨ï¼Ÿ

```go
ç¬¬ä¸€ç§ç†è§£æ–¹æ³•ï¼š
1.æ˜ç¡®é€’å½’å‡½æ•°çš„å®šä¹‰ï¼šæ¯”å¦‚å‡½æ•°å®šä¹‰ä¸ºï¼ˆä»ä¸€å †è‹¹æœä¸­ï¼Œæ‹¿å‡ºæ¥ä¸€é¢—è‹¹æœï¼‰
2.å½“æˆ‘æœ¬æ¬¡æ‹¿å‡ºæ¥ä¸€é¢—è‹¹æœä»¥åï¼Œæˆ‘ç»§ç»­è°ƒç”¨å‡½æ•°ï¼Œæ˜¯ä¸æ˜¯ç»§ç»­æ‹¿ä¸€é¢—å‡ºæ¥
3.å–è‹¹æœæ€»è¦æœ‰ä¸ªåº¦ï¼Œå¦‚æœå †é‡Œé¢æ²¡æœ‰è‹¹æœäº†ï¼Œé‚£è‚¯å®šå°±ä¸èƒ½å†æ‹¿äº†

func TakeOneApple( appleGroup []int) {
	//3.å–è‹¹æœæ€»è¦æœ‰ä¸ªåº¦ï¼Œå¦‚æœå †é‡Œé¢æ²¡æœ‰è‹¹æœäº†ï¼Œé‚£è‚¯å®šå°±ä¸èƒ½å†æ‹¿äº†
  if len(appleGroup) == 0 {
    return
  }
  
  
	//1.ä»ä¸€å †è‹¹æœappleGroupä¸­è·å–ä¸€é¢—è‹¹æœ
  apple := appleGroup[len(appleGroup)-1]
	
  //2.å‰”é™¤å·²ç»è¢«å–èµ°çš„è‹¹æœï¼Œå‰©ä¸‹çš„è‹¹æœ
  appleGroup = appleGroup[:len(appleGroup)-1]
  //3.ç»§ç»­æ‹¿ä¸€é¢—è‹¹æœ
	TakeOneApple(appleGroup)
}

ç¬¬äºŒç§ç†è§£æ–¹æ³•ï¼ˆæ›´ç›´è§‚çš„æ–¹æ³•ï¼‰ï¼š
1.ç›´æ¥æŠŠè°ƒç”¨TakeOneApple(appleGroup)çš„å‡½æ•°å±•å¼€,å¸¦å…¥åˆ°è°ƒç”¨çš„åœ°æ–¹ã€å¦‚ä¸‹...å±•å¼€...ã€‘éƒ¨åˆ†ï¼Œä¸è¿‡å®¹æ˜“è®©äººèµ°ç«å…¥é­”ğŸ¶

func TakeOneApple( appleGroup []int) {
	//3.å–è‹¹æœæ€»è¦æœ‰ä¸ªåº¦ï¼Œå¦‚æœå †é‡Œé¢æ²¡æœ‰è‹¹æœäº†ï¼Œé‚£è‚¯å®šå°±ä¸èƒ½å†æ‹¿äº†
  if len(appleGroup) == 0 {
    return
  }
  
  
	//1.ä»ä¸€å †è‹¹æœappleGroupä¸­è·å–ä¸€é¢—è‹¹æœ
  apple := appleGroup[len(appleGroup)-1]
	
  //2.å‰”é™¤å·²ç»è¢«å–èµ°çš„è‹¹æœï¼Œå‰©ä¸‹çš„è‹¹æœ
  appleGroup = appleGroup[:len(appleGroup)-1]
  
  //3.åœ¨è¿™é‡Œæˆ‘ä»¬ç›´æ¥æŠŠ TakeOneApple(appleGroup) å‡½æ•°å±•å¼€
  ....å±•å¼€....
	//TakeOneApple(appleGroup)
  if len(appleGroup) == 0 {
    return
  }
  apple := appleGroup[len(appleGroup)-1]
  appleGroup = appleGroup[:len(appleGroup)-1]
  ....å±•å¼€....
}
```

## å›æº¯ç®—æ³•ä»£ç å¥—è·¯

```go
//backtraceå‡½æ•°å®šä¹‰ï¼šä»numsä¸­è·å–å…ƒç´ åŠ å…¥åˆ°traceç»“æœä¸­
func backtrace(nums []int, start int, trace []int) {
  // é€’å½’ç»“æŸæ¡ä»¶
  if start == len(nums) {
    return
  }
  
  // å½“å‰å…ƒç´ èŒƒå›´:[start,len(nums)-1]
  for i := start;i < len(nums);i++ {
    //é€‰æ‹©ï¼šnums[i]åŠ å…¥traceä¸­
    trace = append(trace,nums[i])
    
    //ç»§ç»­ä¸‹ä¸€ä¸ªå…ƒç´ çš„æ‹¿å–ï¼ŒèŒƒå›´ï¼š[start+1,len(nums)-1]
    backtrace(nums,i+1,trace)
    
    //æ’¤é”€é€‰æ‹©ï¼šåŠ å…¥åˆ°traceä¸­çš„å…ƒç´ nums[i]å‰”é™¤
    trace = [:len(trace)-1]
  }
}
```

![](./image-20231113211813298.png)

![](./image-20231113213603267.png)



# å®Œæ•´ä»£ç 

æœ¬é¢˜æœ‰éœ€è¦æ³¨æ„çš„ç‚¹ï¼š

-  **åŒä¸€ä¸ª** æ•°å­—å¯ä»¥ **æ— é™åˆ¶é‡å¤è¢«é€‰å–**
- ç»„åˆï¼šä¸æ˜¯æ’åˆ—ã€‚æ¯”å¦‚ [1,2]å’Œ[2,1]æ˜¯åŒä¸€ä¸ªç»„åˆï¼Œåªè¦[1,2]ä¸€ä¸ªç»“æœå³å¯ã€‚å¦‚æœè¦æ±‚çš„æ˜¯æ’åˆ—[1,2]å’Œ[2,1]éƒ½æ˜¯ç»“æœ
- ç»“æœå€¼è¦æ»¡è¶³ç­‰äºtarget

åŸºäºå‰é¢çš„å‰ç¼€çŸ¥è¯†ï¼Œä»£ç åº”è¯¥å¾ˆå®¹æ˜“ç†è§£

```go
var result [][]int
func combinationSum(candidates []int, target int) [][]int {
    //å›æº¯ç®—æ³•
    result = [][]int{}
    trace := []int{}
    backtrace(candidates,0,trace,target,0)
    return result
}

// å¿…é¡»è¦æœ‰startï¼Œè¡¨ç¤ºä¸‹ä¸€ä¸ªé€‰æ‹©çš„èµ·å§‹ä½ç½®ï¼Œéœ€è¦ç´¢å¼• i ä»startä½œä¸ºå¼€å§‹ï¼Œè€Œä¸æ˜¯æ¯æ¬¡éƒ½ä»0å¼€å§‹ï¼›å¦‚æœæ˜¯ä»0å¼€å§‹ï¼Œå¾—åˆ°çš„ç»“æœæ˜¯æ’åˆ—ï¼Œè€Œä¸æ˜¯ç»„åˆï¼›æ¯”å¦‚ 12 å’Œ 21 æ˜¯åŒä¸€ç§ç»„åˆï¼Œä½†æ˜¯æ˜¯ä¸åŒçš„æ’åˆ—ï¼›targetéƒ½æ˜¯3  
func backtrace(candidates []int, start int,trace []int,target int,sum int) {
  	// è¿™é‡Œsumçš„ä½œç”¨æ˜¯ä¸ºäº†å¯¹traceå’Œåšè®°å½•
    if sum == target { // å¾—åˆ°ä¸€ç»„ç»“æœ
        temp := make([]int,len(trace))
        copy(temp,trace)
        result = append(result,temp)
        return
    }

    if sum > target { // è¯´æ˜ç»“æœæ¯”è¾ƒå¤§ï¼Œæ²¡å¿…è¦ç»§ç»­é€’å½’ï¼Œå› ä¸ºnumsä¸­çš„å…ƒç´ éƒ½æ˜¯æ•´æ•°ï¼ŒåŠ å…¥çš„æ–°å…ƒç´ åªä¼šè®©sumæ›´å¤§
        return
    }
	
    // è¯´æ˜sum < target
    for i := start;i < len(candidates);i++ {
      	// å°†nums[i]å…ƒç´ åŠ å…¥ç»“æœ
        trace = append(trace,candidates[i])
        sum += candidates[i]
      	// ä»å‰©ä¸‹çš„numsä¸­ï¼Œé€‰æ‹©ä¸‹ä¸€ä¸ªå…ƒç´ ï¼ˆè”æƒ³å‰é¢è‹¹æœçš„ä¾‹å­ï¼‰
        backtrace(candidates,i,trace,target,sum) // æ³¨æ„ï¼š åŒä¸€ä¸ª æ•°å­—å¯ä»¥ æ— é™åˆ¶é‡å¤è¢«é€‰å–ï¼Œæ‰€ä»¥æ˜¯iï¼Œè€Œä¸æ˜¯i+1
      	// å°†nums[i]å…ƒç´ ä»ç»“æœä¸­æ’¤é”€
        trace = trace[:len(trace)-1]
        sum -= candidates[i]
    }
}
```

